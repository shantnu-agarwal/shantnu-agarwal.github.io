<!DOCTYPE html>
<html>

<head>
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-130200243-1"></script>
    <script>
        window.dataLayer = window.dataLayer || [];

        function gtag() {
            dataLayer.push(arguments);
        }
        gtag('js', new Date());

        gtag('config', 'UA-130200243-1');
    </script>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css"
        integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
    <link rel="stylesheet" type="text/css" href="../style.css">
    <link rel="stylesheet" type="text/css" href="../css/blog.css">

    <title>APIs with Azure Funtions | Shantnu Agarwal</title>
    <style type="text/css">
        p,
        span {
            font-size: 20px;
        }
    </style>

</head>

<body>

    <nav class="navbar navbar-expand-lg navbar-light bg-light">
        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent"
            aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>

        <div class="collapse navbar-collapse" id="navbarSupportedContent">
            <ul class="navbar-nav mr-auto">
                <li class="nav-item active">
                    <a class="nav-link" href="../blogs.html">Home</a>
                </li>
            </ul>
        </div>
    </nav>
    <button onclick="topFunction()" id="scrollBtn" title="Go to top">
        <?xml version="1.0" encoding="iso-8859-1"?>
        <!-- Generator: Adobe Illustrator 19.0.0, SVG Export Plug-In . SVG Version: 6.00 Build 0)  -->
        <svg class="bult2" version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg"
            xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 492 492"
            style="enable-background:new 0 0 492 492;" xml:space="preserve">
            <g>
                <g>
                    <path
                        d="M442.627,185.388L265.083,7.844C260.019,2.78,253.263,0,245.915,0c-7.204,0-13.956,2.78-19.02,7.844L49.347,185.388
                    c-10.488,10.492-10.488,27.568,0,38.052l16.12,16.128c5.064,5.06,11.82,7.844,19.028,7.844c7.204,0,14.192-2.784,19.252-7.844
                    l103.808-103.584v329.084c0,14.832,11.616,26.932,26.448,26.932h22.8c14.832,0,27.624-12.1,27.624-26.932V134.816l104.396,104.752
                    c5.06,5.06,11.636,7.844,18.844,7.844s13.864-2.784,18.932-7.844l16.072-16.128C453.163,212.952,453.123,195.88,442.627,185.388z" />
                </g>
            </g>
            <g>
            </g>
            <g>
            </g>
            <g>
            </g>
            <g>
            </g>
            <g>
            </g>
            <g>
            </g>
            <g>
            </g>
            <g>
            </g>
            <g>
            </g>
            <g>
            </g>
            <g>
            </g>
            <g>
            </g>
            <g>
            </g>
            <g>
            </g>
            <g>
            </g>
        </svg>

        </i></button>
    <br> <br>



    <div class="container" id="back2top">
        <!-- This element is where the scroller will take you from the bottom-->

    </div>


    <!------------------- Headline ends here ----------->


    <div class="container">

        <div id="blog-header">
            <h1 class="card-title text-center">APIs with Azure Funtions</h1>
            <hr class="my-4">
            </hr>
            <h6>June 19, 2020</h6>
        </div>

    </div>
    <img class="blog-header-image" src="../images/azurefunctionsapi/title.png" alt="title image for blog">
    <div class="container blog-body">
        <h2 class="blog-subheading">What is the problem that we are looking to solve?</h2>
        <p class="blog-content">
            <strong>I</strong>f you have developed an API and you know that all you want to do is make a request,
            process it on the server and get the response you need. But it all comes crashing when you get stuck setting
            up the right environment on the server, or your dependencies go missing.
        </p>
        <p class="blog-content">
            It’s time to change that. What if you only needed to be concerned about what data the API receives, what it
            does it with and what it returns as response. True, all of us fear seeing the <i>internal server error</i>
            arising
            from mismatched server configurations.
        </p>
        <p class="blog-content">
            You could argue that you are a master in managing servers and have never had issues with server
            configurations and environment settings. Well, but are you paying only for what you use? Most cloud services
            provide you certain resources (that can be scaled up) but you are still charged for each second of the app
            being deployed on the cloud, whether you use it or not.
        </p>
        <p class="blog-content">
            Here is where Azure Functions saves the day. It supports your favourite languages including C#, JavaScript,
            Python, Java, TypeScript and more. You can write your function in any of these languages and you are only
            charged when the function is being executed. So, if it was called once in the past 24 hours and execution
            took 10 seconds, you get charged for 10 seconds.
        </p>
        <p class="blog-content">
            If your API can be written down in one function, you can run it on Azure Functions and save the hassles and
            money.
        </p>
        <h2 class="blog-subheading">What does Azure Functions do?</h2>
        <p class="blog-content">
            It enables you to run code segments that are perfect for APIs. It also allows you to write code that
            executes with a timer. So, suppose you want to back-up a file system every 12 hours to a remote server, you
            can write the function for it and Azure Functions will ensure that it runs every 12 hours.
        </p>
        <h2 class="blog-subheading">How to make an Azure Function?</h2>
        <p class="blog-content">
            Let's dive straight into it now. There are numerous ways to make an Azure Function. Today, let's look at it
            from the Azure Portal.
        </p>
        <h2>Step 1:</h2>
        <p class="blog-content">
            Open the <a href="https://portal.azure.com" target="_blank"> Azure Portal</a>, login and select <i>Create a
                resource</i> to
            access the <i>Marketplace</i>.
            <img class="blog-media" src="../images/azurefunctionsapi/azureportal.png" alt="Azure Portal Home Page">
        </p>
        <h2>Step 2:</h2>
        <p class="blog-content">
            Search for <i>Functions</i> and choose <i>Function App</i>.
            <img class="blog-media" src="../images/azurefunctionsapi/searchfunction.png" alt="Searching for Functions">
        </p>
        <h2>Step 3:</h2>
        <p class="blog-content">
            Click on <i>Create</i> to open the setup for the Function. Fill up the details as you need them. Be careful
            with
            the <i>Region</i> as Functions might not be available in all Regions (Central India, for example, does not
            support
            Functions but South and West India do). I’ll go ahead with Node.js v12 LTS as my environment. Once done,
            click next and select a <i>Storage Account</i>.
            <img class="blog-media" src="../images/azurefunctionsapi/basicconfig.png" alt="Configure Azure Functions">
        </p>
        <h2>Step 4:</h2>
        <p class="blog-content">
            You will need to set up storage so that there is some memory available for the API or app to store your
            files and log data. Don’t worry, even though it says storage <i>account</i>, it is just a storage allocation
            for
            you on the cloud that you can use for other projects as well. Think of it as your hard disk in the cloud
            that can store clustered, unstructured data, media files, etc (end of Firebase’s expensive monopoly?).
        </p>
        <p class="blog-content">
            Choosing the plan in this section of the setup makes all the difference in the world if you are low on
            budget. Go for <i>serverless</i> so that you can peacefully focus on building, testing, and deploying your
            function. Serverless means that there is no dedicated server being allocated to you. Your function just
            needs storage to run. You will only be charged for the computation time and memory that you use. No server
            fees. If you go for a regular plan, you will be charged even if the function is sitting idle.
            <img class="blog-media" src="../images/azurefunctionsapi/hosting.png" alt="Configure Storage for API">
        </p>
        <h2>Step 5:</h2>
        <p class="blog-content">
            Enable <i>Application Insights</i> and smash the <i>Create</i> button. Now you wait. Wait till theresources
            are deployed
            and think about what you just did. You deployed a serverless app on the cloud, while minimising costs and
            giving up all concern for infrastructure. The app that you are now deploying will auto scale to handle
            millions of calls if that is what you want to throw at it.
            <img class="blog-media" src="../images/azurefunctionsapi/deployment.png" alt="Deployment Complete">
        </p>
        <p class="blog-content">
            Now that the function deployment is complete, it's time to dive into the code and see the app work
            first-hand. Click on <i>Go to resource</i>.
        </p>
        <p class="blog-content">
            From the left side panel, choose Functions under the Functions header and click on <img
                src="../images/azurefunctionsapi/new.png" alt="Add Button">
            to create a new
            function.
        </p>
        <p class="blog-content">
            There are multiple options to choose from. I will demonstrate the HTTP Trigger today. This will allow you to
            build an API.
        </p>
        <img class="blog-media" src="../images/azurefunctionsapi/newfunc.png" alt="New Function">
        <p class="blog-content">
            Choosing a function-level authorisation allows you to allow access to only one Function with each access
            key.
        </p>
        <p class="blog-content">
            Open the newly deployed function and click on <i>Code + Test</i> from the left side panel. It will have a
            boiler
            plate ready for you already.
        </p>

        <img class="blog-media" src="../images/azurefunctionsapi/boiler.png" alt="Boiler Plate">
        <p class="blog-content">
            This boiler plate is a simple Node.js API which requires a ‘name’ parameter and returns a basic answer.
            Click on <i>Get Function URL</i> to get the API endpoint along with the access key. This access key
            authorises you
            to run the Function and is a mandatory query parameter for the HTTP request.
        </p>
        <p class="blog-content">
            An API call be made using <a href="https://www.postman.com/" target="_blank">Postman</a> or any other API
            testing software. Pass a name parameter as <i>query</i> to the
            API call and test it.
        </p>
        <!-- <img class="blog-media" src="../images/azurefunctionsapi/postman.gif" alt="Postman API Testing"> -->
        <video style="max-width: 100%; height: auto;" controls>
            <source src="https://astrollercdn.azureedge.net/Postman.mp4">
        </video>
        <p class="blog-content">
            It’s done! You have a server less function running in the cloud, which is more than just a simple API. If
            you
            are new to APIs, you should play around with what you just made to understand concepts better. Let me write
            down a slight modification of this API to help you get started with making your own.
        </p>

        <script src="https://gist.github.com/shantnu-agarwal/39cbecab44ee69749e82d1149c666436.js"></script>



        <p class="blog-content">
            Azure Functions are dynamic. You can:
        </p>
        <ol class="blog-content">
            <li>
                Add attachments to it.
            </li>
            <li>Make it run on a schedule with a timer.

            </li>
            <li>Automate a manual process so that the function runs whenever there is a new entry to your SQL database.
            </li>
            <li>
                Connect it with container storage, so that the function can execute automatically whenever a new blob is
                uploaded.
            </li>
        </ol>

        <p class="blog-content">
            There is so much more to Azure Functions than just a regular HTTP API. Discover more about Azure Functions
            on the vast and in-depth <a href="https://docs.microsoft.com/en-us/azure/azure-functions/"
                target="_blank">official documentation</a> from Microsoft.
        </p>
        <p class="blog-content">
            I hope this helped you in your project. A few claps on this blog on Medium would
            help me go a long way.
        </p>
        <a class="btn btn-primary sub-button" href="https://medium.com/@shantnu.agarwal/">Find me on Medium
        </a>
        <a class="btn btn-primary sub-button"
            href="https://forms.office.com/Pages/ResponsePage.aspx?id=oBzDhDusrk6tEVGdgCM-b6jTh1ydMqBBljMfASa_1ApUNURJODFPSlVUUzc3OEdRUDlMSDRZUTZCNi4u">Subscribe
            For Future Blogs</a>
        <div id="disqus_thread"></div>
    </div>




    <script>

        var disqus_config = function () {
            this.page.url = "https://shantnu.net/blogs/azurefunctionsapi.html";
            this.page.identifier = "AzureFunctionsAPI.html";
        };
        (function () { // DON'T EDIT BELOW THIS LINE
            var d = document, s = d.createElement('script');
            s.src = 'https://shantnu.disqus.com/embed.js';
            s.setAttribute('data-timestamp', +new Date());
            (d.head || d.body).appendChild(s);
        })();
    </script>





    <!----------------------------FOOTER HERE!---------------------------->



    <footer class="footer mt-auto py-3">
        <div class="container">
            <hr class="my-4">
            <div class="row">
                <div class="col">
                    <a href="https://www.linkedin.com/in/shantnuagarwal/"><img class="footer-image"
                            src="../images/linkedin.jpg" alt="LinkedIn"></a>
                    <figcaption>LinkedIn</figcaption>
                </div>
                <div class="col">
                    <a href="https://github.com/shantnu-agarwal"><img class="footer-image" src="../images/github.jpg"
                            alt="GitHub"></a>
                    <figcaption>GitHub</figcaption>
                </div>
                <div class="col">
                    <a href="mailto:shantnu.agarwal@gmail.com"><img class="footer-image" src="../images/mail.jpg"
                            alt="Mail"></a>
                    <figcaption>Mail</figcaption>
                </div>

            </div>
            <div class="center">
                <small>Last Updated: December 6<sup>th</sup>, 2019</small>
            </div>
        </div>
    </footer>
    <script src="https://code.jquery.com/jquery-3.4.1.min.js"
        integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"
        integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM"
        crossorigin="anonymous"></script>
    <script type="text/javascript" src="darkapi.js"></script>


</body>

</html>